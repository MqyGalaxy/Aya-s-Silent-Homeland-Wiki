<section id="hero">
    <div id="heroBg" class="hero-bg"></div>
    <div class="hero-overlay"></div>
    <div style="z-index: 1; position: relative;">
        <div style="font-family: var(--font-tech); color: var(--accent-orange); margin-bottom: 10px;">/// SHAMEIMARU AYA's</div>
        <h1 class="hero-title">SILENT<br><span>HOMELAND</span></h1>
        
        <div style="margin-top: 30px; display: inline-flex; align-items: center; background: rgba(0,0,0,0.8); border: 1px solid var(--border-bright); padding: 15px 30px;">
            <div style="width: 10px; height: 10px; background: var(--accent-red); margin-right: 15px; box-shadow: 0 0 10px var(--accent-red);"></div>
            <span style="font-size: 1.2rem; letter-spacing: 2px;">V1.0.0 正式版现已发布</span>
        </div>

        <div class="hero-actions">
            <button class="tactical-btn btn-primary" onclick="openModal('downloadModal')">
                <span style="font-size:1.5rem">↓</span> 立即下载游戏
            </button>
            <button class="tactical-btn btn-secondary" onclick="openModal('videoModal')">
                <span class="icon">●</span> 观看宣传PV
            </button>
        </div>
    </div>
</section>

<style>
    #hero { 
        height: 100vh; 
        width: 100%; 
        position: relative; 
        overflow: hidden; /* 关键：隐藏溢出的背景边缘 */
        display: flex; 
        align-items: flex-end; 
        padding: 0 0 80px 80px; 
    }

    .hero-bg { 
        position: absolute; 
        /* 关键：让背景比屏幕大一圈 (例如 -50px)，这样移动时才不会露出白边 */
        top: -50px; left: -50px; right: -50px; bottom: -50px;
        z-index: 0; 
        
        background-image: 
            radial-gradient(circle at 10% 90%, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.6) 40%, transparent 70%),
            linear-gradient(to top, #050505 0%, rgba(5,5,5,0.6) 30%, transparent 100%),
            /* 请替换为您的实际图片路径 */
            url('../../assets/images/index_background.jpg'); 
        
        background-size: cover;
        background-position: center;
        filter: contrast(110%);
        
        /* 性能优化：告诉浏览器这个元素会变换，启用 GPU 加速 */
        will-change: transform;
        transition: transform 0.1s linear; /* 简单的平滑过渡 */
    }

    .hero-overlay {
        position: absolute;
        inset: 0;
        z-index: 0;
        pointer-events: none;
        
        background-image: 
            radial-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
            linear-gradient(to bottom, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.2) 50%),
            radial-gradient(circle at center, transparent 60%, #050505 100%);

        /* 分别控制三种背景的大小 */
        background-size: 
            30px 30px,   /* 点阵间距 */
            100% 4px,    /* 扫描线密度 */
            100% 100%;   /* 暗角铺满 */
            
        /* 稍微降低一点透明度，避免影响背景图观看 */
        opacity: 0.8;
    }

    .hero-title { font-family: var(--font-header); font-size: 8vw; line-height: 0.9; text-transform: uppercase; color: transparent; -webkit-text-stroke: 2px var(--text-main); opacity: 1;}
    .hero-title span { color: var(--text-main); -webkit-text-stroke: 0; text-shadow: 0 5px 20px rgba(0,0,0,0.8); }
    .hero-actions { display: flex; gap: 20px; margin-top: 40px; }
    .tactical-btn { position: relative; padding: 15px 40px; font-family: var(--font-tech); font-size: 1.2rem; font-weight: bold; text-transform: uppercase; cursor: pointer; transition: 0.3s; clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px); display: flex; align-items: center; gap: 10px; }
    .btn-primary { background: var(--accent-orange); color: #000; border: none; }
    .btn-primary:hover { background: #fff; padding-left: 50px; }
    .btn-secondary { background: transparent; color: var(--text-main); border: 1px solid var(--text-main); }
    .btn-secondary:hover { border-color: var(--accent-red); color: var(--accent-red); }
    .btn-secondary span.icon { color: var(--accent-red); margin-right: 5px; animation: blink 2s infinite; }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

    @media (max-width: 768px) {
        #hero { padding: 0 20px 60px 20px; justify-content: center; text-align: center; }
        .hero-title { font-size: 15vw; }
        .hero-actions { flex-direction: column; width: 100%; gap: 15px; }
        .tactical-btn { width: 100%; justify-content: center; font-size: 1rem; padding: 12px 20px; }
        
        /* 手机上禁用视差效果以省电 */
        .hero-bg { 
            transform: none !important; 
            top: 0; left: 0; right: 0; bottom: 0; 
            background-size: cover;
            background-position: right;
            filter: contrast(110%);
        }
    }
</style>

<script is:inline>
    const heroBg = document.getElementById('heroBg');

    // 修改点：监听 document 而不是 heroSection
    // 这样无论鼠标在哪里，只要页面开着，背景都会跟随移动
    document.addEventListener('mousemove', (e) => {
        if (!heroBg) return;

        // 1. 获取鼠标在整个视口中的相对位置
        // 结果范围：-0.5 (左/上) 到 0.5 (右/下)
        const x = (e.clientX / window.innerWidth) - 0.5;
        const y = (e.clientY / window.innerHeight) - 0.5;

        // 2. 设置移动力度 (像素)
        const intensity = 40;

        // 3. 反向移动产生视差
        const moveX = x * intensity * -1;
        const moveY = y * intensity * -1;

        // 4. 应用变换 (保持 scale 1.1 防止露白)
        // 使用 requestAnimationFrame 稍微优化一下性能，虽然直接设置也很流畅
        window.requestAnimationFrame(() => {
            heroBg.style.transform = `scale(1.1) translate(${moveX}px, ${moveY}px)`;
        });
    });

    // 移除了 mouseleave 的复位逻辑，使其保持跟随状态
</script>